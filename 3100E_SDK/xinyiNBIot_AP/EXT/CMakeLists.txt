foreach(def ${PRJ_DEF_LIST})
    if(${def} MATCHES "BLE_EN")
    string(REGEX MATCH "[0-9]+" BLE_EN ${def})
    endif()
endforeach()

if(${BLE_EN} EQUAL 1)
    file(GLOB_RECURSE BLE_C_SOURCES  "${CMAKE_CURRENT_SOURCE_DIR}/BLE/*.c")
    file(GLOB_RECURSE BLE_C_EXCLUDE_SOURCES)
    list(REMOVE_ITEM BLE_C_SOURCES ${BLE_C_EXCLUDE_SOURCES})
    set(C_SOURCES ${C_SOURCES} ${BLE_C_SOURCES})
    get_sub_header_dirs(BLE_INCLUDE_DIRS ${CMAKE_CURRENT_LIST_DIR}/BLE)
    set(INCLUDE_DIRS ${INCLUDE_DIRS} ${BLE_INCLUDE_DIRS})
endif()

foreach(def ${PRJ_DEF_LIST})
    if(${def} MATCHES "GNSS_EN")
    string(REGEX MATCH "[0-9]+" GNSS_EN ${def})
    endif()
endforeach()

if(${GNSS_EN} EQUAL 1)
    file(GLOB_RECURSE GNSS_C_SOURCES  "${CMAKE_CURRENT_SOURCE_DIR}/GNSS/*.c")
    file(GLOB_RECURSE GNSS_C_EXCLUDE_SOURCES)
    list(REMOVE_ITEM GNSS_C_SOURCES ${GNSS_C_EXCLUDE_SOURCES})
    set(C_SOURCES ${C_SOURCES} ${GNSS_C_SOURCES})
    get_sub_header_dirs(GNSS_INCLUDE_DIRS ${CMAKE_CURRENT_LIST_DIR}/GNSS)
    set(INCLUDE_DIRS ${INCLUDE_DIRS} ${GNSS_INCLUDE_DIRS})
endif()

set(PRJ_SRC_LIST ${PRJ_SRC_LIST} ${C_SOURCES} PARENT_SCOPE)
set(BASE_INCLUDE_DIRS ${BASE_INCLUDE_DIRS} ${INCLUDE_DIRS} PARENT_SCOPE)


